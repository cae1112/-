# Управление IT‑фирмой — расширение «ВКМ»

Готовая структура репозитория для реализации подсистем **«ВКМ_РаботаСЗаявкамиКлиентов»** и **«ВКМ_РасчётУправленческойЗарплаты»**, отчётов, инструкции и автотеста (Vanessa Automation).

> В репозитории соблюдён префикс `ВКМ_` для всех добавляемых объектов и модулей. Код в примерах — псевдокод/эскизы на 1С с пометками, пригодные для переноса в 1C:EDT.

## Требования окружения
- Платформа **1С:Предприятие 8.3.27** и выше
- **1C:EDT** (последняя актуальная)
- Vanessa Automation (из официального репозитория)
- Git + GitHub

## Как начать (коротко)
1. Создайте новую базу **на основе исходной конфигурации «Управление IT‑фирмой»** (репозиторий источника согласно ТЗ).  
2. Откройте конфигурацию в **1C:EDT**. Создайте отдельный **Solution**/Workspace для доработки.
3. Импортируйте объекты из папки `src/` (или создайте по спецификации из `docs/Architecture.md`).  
4. Выполните «Проверить проект» — ошибок быть не должно.
5. Заполните константы (см. раздел «Начальная настройка» ниже).
6. Назначьте профили и роли пользователям.
7. Сформируйте **демо‑данные** (см. `docs/DemoData.md`), затем выгрузите *.dt* и добавьте его в **Releases** GitHub.
8. Запустите автотест Vanessa Automation по инструкции `tests/vanessa/README.md`.

## Начальная настройка (пошагово)
1. **Константы (новые):**
   - `ВКМ_ТелеграмТокен` — строка
   - `ВКМ_ТелеграмГруппаID` — строка/число
   - `ВКМ_НоменклатураАбонентскаяПлата` — Справочник.Номенклатура
   - `ВКМ_НоменклатураРаботыСпециалиста` — Справочник.Номенклатура
2. **Профили групп доступа (поставляемые):**
   - `ВКМ_Специалист`, `ВКМ_Менеджер`, `ВКМ_БухгалтерИТФирмы`, `ВКМ_КадровикРасчётчик`
3. **Роли** (минимально):
   - `ВКМ_ОбслуживаниеКлиентовПолнДоступ` (документ, регистр, обработка)
   - `ВКМ_ЗарплатаПолнДоступ`
   - `ВКМ_ПросмотрОтчётовПоРолям` (вариативно через профили)
4. **Регламентное задание:**
   - `ВКМ_ОтправкаТелеграмУведомлений` — каждые 5–10 минут. Проходит по элементам справочника `ВКМ_УведомлениеТелеграм`, вызывает общий модуль интеграции, при успехе — удаляет элемент.
5. **Телеграм-бот:**
   - Создайте бота через @BotFather, вставьте токен в константу.
   - Добавьте бота в группу и скопируйте `chat_id` в константу `ВКМ_ТелеграмГруппаID`.
6. **Печать акта:**
   - Откройте шаблон `docs/templates/Акт_об_оказанных_услугах.docx` и адаптируйте под фирменный стиль. Макет подключается к документу «Реализация товаров и услуг».
7. **Планировщик (опционально):**
   - Установите обработку `ВКМ_КалендарьСпециалистов` на начальную страницу и проверьте обновление через `Оповестить()`.
8. **Отчёты и доступ:**
   - Проверьте доступность отчётов по ролям согласно разделу `docs/Reports.md`.

Подробная архитектура и алгоритмы — в `docs/Architecture.md`.

---

© 2025-10-23
